import{c as O}from"./cart-FqzLic94.js";import{_ as F,R as Q,o as y,h as R,w as k,c as T,i as G,d as H,b as t,t as m,F as q,r as x,m as B,g as M}from"./index-P1H6muw5.js";import{g as I,b as tt,S as st,a as et,P as at,A as ot}from"./autoplay-ACN39zu1.js";import{M as rt}from"./bootstrap.esm-TTjMTX3M.js";import{a as L}from"./axios-G2rPRu76.js";import"./sweetalert2.all-t36qbmOe.js";function it(s){const{effect:a,swiper:e,on:c,setTranslate:o,setTransition:l,overwriteParams:f,perspective:d,recreateShadows:n,getEffectParams:h}=s;c("beforeInit",()=>{if(e.params.effect!==a)return;e.classNames.push(`${e.params.containerModifierClass}${a}`),d&&d()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const i=f?f():{};Object.assign(e.params,i),Object.assign(e.originalParams,i)}),c("setTranslate",()=>{e.params.effect===a&&o()}),c("setTransition",(i,_)=>{e.params.effect===a&&l(_)}),c("transitionEnd",()=>{if(e.params.effect===a&&n){if(!h||!h().slideShadows)return;e.slides.forEach(i=>{i.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(_=>_.remove())}),n()}});let r;c("virtualUpdate",()=>{e.params.effect===a&&(e.slides.length||(r=!0),requestAnimationFrame(()=>{r&&e.slides&&e.slides.length&&(o(),r=!1)}))})}function lt(s,a){const e=I(a);return e!==a&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function U(s,a,e){const c=`swiper-slide-shadow${e?`-${e}`:""}${s?` swiper-slide-shadow-${s}`:""}`,o=I(a);let l=o.querySelector(`.${c.split(" ").join(".")}`);return l||(l=tt("div",c.split(" ")),o.append(l)),l}function nt(s){let{swiper:a,extendParams:e,on:c}=s;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),it({effect:"coverflow",swiper:a,on:c,setTranslate:()=>{const{width:f,height:d,slides:n,slidesSizesGrid:h}=a,r=a.params.coverflowEffect,i=a.isHorizontal(),_=a.translate,X=i?-_+f/2:-_+d/2,V=i?r.rotate:-r.rotate,Y=r.depth;for(let v=0,W=n.length;v<W;v+=1){const u=n[v],D=h[v],Z=u.swiperSlideOffset,N=(X-Z-D/2)/D,p=typeof r.modifier=="function"?r.modifier(N):N*r.modifier;let g=i?V*p:0,w=i?0:V*p,E=-Y*Math.abs(p),b=r.stretch;typeof b=="string"&&b.indexOf("%")!==-1&&(b=parseFloat(r.stretch)/100*D);let P=i?0:b*p,$=i?b*p:0,A=1-(1-r.scale)*Math.abs(p);Math.abs($)<.001&&($=0),Math.abs(P)<.001&&(P=0),Math.abs(E)<.001&&(E=0),Math.abs(g)<.001&&(g=0),Math.abs(w)<.001&&(w=0),Math.abs(A)<.001&&(A=0),a.browser&&a.browser.need3dFix&&(Math.abs(g)/90%2===1&&(g+=.001),Math.abs(w)/90%2===1&&(w+=.001));const J=`translate3d(${$}px,${P}px,${E}px)  rotateX(${w}deg) rotateY(${g}deg) scale(${A})`,K=lt(r,u);if(K.style.transform=J,u.style.zIndex=-Math.abs(Math.round(p))+1,r.slideShadows){let C=i?u.querySelector(".swiper-slide-shadow-left"):u.querySelector(".swiper-slide-shadow-top"),S=i?u.querySelector(".swiper-slide-shadow-right"):u.querySelector(".swiper-slide-shadow-bottom");C||(C=U("coverflow",u,i?"left":"top")),S||(S=U("coverflow",u,i?"right":"bottom")),C&&(C.style.opacity=p>0?p:0),S&&(S.style.opacity=-p>0?-p:0)}}},setTransition:f=>{a.slides.map(n=>I(n)).forEach(n=>{n.style.transitionDuration=`${f}ms`,n.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${f}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}const ct={props:["otherClassData"],components:{Swiper:st,SwiperSlide:et,RouterLink:Q},setup(){return{modules:[nt,at,ot]}},methods:{changPage(s){this.$emit("chang-page",s)}}},dt={class:"card bg-primary border-0 pt-4",style:{height:"481px",width:"300px"}},ht={class:"d-flex justify-content-center"},ft={class:"d-flex justify-content-center align-items-center border rounded-circle border-secondary"},pt=["src"],mt={class:"card-body text-center p-0 mt-5"},ut={class:"card-title fs-4"},_t={class:"mt-8 mb-6"},gt={class:"card-text fs-6"},wt=t("div",{class:"card-footer text-center bg-secondary text-white"}," 詳細介紹 ",-1);function bt(s,a,e,c,o,l){const f=x("RouterLink"),d=x("swiper-slide"),n=x("swiper");return y(),R(n,{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",autoplay:{delay:2e3,disableOnInteraction:!1},coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:!0,modules:c.modules,class:"mySwiper"},{default:k(()=>[(y(!0),T(q,null,G(e.otherClassData,(h,r)=>(y(),R(d,{key:r,onClick:i=>l.changPage(h.id)},{default:k(()=>[H(f,{to:`/class/${h.id}`},{default:k(()=>[t("div",dt,[t("div",ht,[t("div",ft,[t("img",{src:h.imageUrl,class:"card-img-top rounded-circle card-img p-5",alt:"導師照片"},null,8,pt)])]),t("div",mt,[t("h2",ut,m(h.title),1),t("div",_t,[t("p",gt,m(h.description),1)])]),wt])]),_:2},1032,["to"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules"])}const yt=F(ct,[["render",bt]]);var vt={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_API_NAME:"ssozr",BASE_URL:"/vue2024week62/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:j,VITE_APP_API_NAME:z}=vt,Ct={data(){return{classData:{},otherClassData:[],id:"",goCart:!1,category:"",addModal:"",qtyNum:1}},components:{SwiperClassVue:yt},methods:{getClassData(){console.log(this.id),L.get(`${j}/v2/api/${z}/product/${this.id}`).then(s=>{console.log(s),this.classData=s.data.product,this.category=s.data.product.category,this.getOtherClassData()}).catch(()=>{})},getOtherClassData(){L.get(`${j}v2/api/${z}/products/?category=${this.category}`).then(s=>{this.otherClassData=s.data.products,this.filteredItems()}).catch(()=>{})},openAddModal(){this.addModal.show()},hideAddModal(){this.addModal.hide()},...B(O,["addCart"]),...B(O,["changeGoCart"]),formatNumber(s){if(s)return s.toLocaleString()},filteredItems(){const s=[],a=this.id;this.otherClassData.forEach(function(e){e.id!==a&&s.push(e)}),this.otherClassData=s},changPage(s){this.id=s,this.$router.push(`/product/${s}`),this.getClassData(),window.scrollTo(0,0)},qty(s){this.qtyNum=s}},mounted(){const{id:s}=this.$route.params;this.id=s,this.getClassData(),this.addModal=new rt(this.$refs.addModal)}},St={class:"container mb-15 teacher","data-aos":"fade-right"},Mt={class:"row"},xt={class:"text-center p-0 mb-10 col-8 offset-2"},Dt=["src"],Et={class:"mb-10"},Pt={class:"border-bottom border-primary border-3 pb-3"},$t={class:"fs-6 mt-lg-0 mt-3 ps-lg-5 d-inline-block"},At={class:"row flex-lg-row-reverse"},kt={class:"col-lg-4 text-center"},Tt=["src"],qt={class:"mb-6 mb-lg-0"},It={class:"col-lg-8 d-flex flex-column justify-content-between"},Vt={class:"fs-4 mb-lg-15 mb-8"},Nt={class:"d-lg-flex text-lg-start text-center justify-content-between align-items-end"},Ot={class:"p-0 m-0"},Rt={class:"fs-4"},Bt={class:"ms-4"},Lt={class:"fs-4 m-0"},Ut={class:"ms-4"},jt={class:"d-lg-flex mt-3"},zt={class:"my-15 my-md-30 container","data-aos":"fade-right"},Ft=t("h2",{class:"border-bottom border-primary border-3 pb-3"},"相關課程",-1),Gt={class:"modal",tabindex:"-1",ref:"addModal"},Ht={class:"modal-dialog"},Xt={class:"modal-content"},Yt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"選擇購買數量"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Wt={class:"modal-body"},Zt={class:"dropdown"},Jt={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Kt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Qt=["onClick"],ts={class:"modal-footer"},ss=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function es(s,a,e,c,o,l){const f=x("SwiperClassVue");return y(),T(q,null,[t("div",St,[t("div",Mt,[t("div",xt,[t("img",{src:o.classData.imagesUrl,class:"imgI",alt:"課程示意圖"},null,8,Dt)]),t("div",Et,[t("h2",Pt,[M(m(o.classData.title)+" ",1),t("span",$t,m(o.classData.description),1)])]),t("div",At,[t("div",kt,[t("img",{src:o.classData.imageUrl,alt:"老師照片",class:"card-img rounded-circle mb-4"},null,8,Tt),t("h3",qt,"授課老師:"+m(o.classData.unit),1)]),t("div",It,[t("p",Vt,m(o.classData.content),1),t("div",Nt,[t("ul",Ot,[t("li",null,[t("p",Rt,[M("課程堂數:"),t("span",Bt,m(o.classData.origin_price)+"堂",1)])]),t("li",null,[t("p",Lt,[M("課程總額:"),t("span",Ut,"NT$"+m(l.formatNumber(o.classData.price)),1)])])]),t("div",jt,[t("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=d=>l.openAddModal(o.classData))},"加入購物車"),t("button",{type:"button",class:"btn btn-primary ms-6",onClick:a[1]||(a[1]=d=>s.changeGoCart(o.classData,l.qty))},"立即上課")])])])])])]),t("div",zt,[Ft,H(f,{"other-class-data":o.otherClassData,onChangPage:l.changPage},null,8,["other-class-data","onChangPage"])]),t("div",Gt,[t("div",Ht,[t("div",Xt,[Yt,t("div",Wt,[t("div",Zt,[M(" 購買數量: "),t("button",Jt,m(o.qtyNum),1),t("ul",Kt,[(y(),T(q,null,G(20,(d,n)=>t("li",{key:n},[t("a",{class:"dropdown-item",onClick:h=>l.qty(d)},m(d),9,Qt)])),64))])])]),t("div",ts,[ss,t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=d=>(s.addCart(o.classData,o.qtyNum),l.hideAddModal()))},"加入購物車")])])])],512)],64)}const cs=F(Ct,[["render",es]]);export{cs as default};
